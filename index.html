<html>

<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
    <script src="//d3js.org/d3.v3.min.js" charset="utf-8"></script>

</head>
<style>
    .points {
        border: 1px solid black;
    }

    .axis text {
        font: 5px sans-serif;
    }

    .axis path,
    .axis line {
        fill: none;
        stroke: #000;
        shape-rendering: crispEdges;
    }
</style>

<body>

    <script>
        d3.json('http://localhost:8000/pulsar_data_test.json',
            function(data) {
                // console.log(data);

                var periods = [];
                for (i = 0; i < data.length; i++) {
                    periods.push(data[i]['Period'])
                }

                var periods_der = [];
                for (i = 0; i < data.length; i++) {
                    periods_der.push(Math.log10(data[i]['Period Derivative']))
                }


                console.log(periods)
                    // console.log(periods_der)
                console.log(Math.round(Math.floor(d3.min(periods) * 10000)) / 10000, Math.round(Math.ceil(d3.max(periods) * 10000)) / 10000)
                var margin = {
                        top: 30,
                        right: 30,
                        bottom: 30,
                        left: 30
                    },
                    width = 500 - margin.left - margin.right,
                    height = 500 - margin.top - margin.bottom;


                var xvalue = function(d) {
                        return data['Period'];
                    },
                    xscale = d3.scale.log()
                    .domain([Math.round(Math.floor(d3.min(periods) * 10000)) / 10000, Math.round(Math.ceil(d3.max(periods) * 10000)) / 10000])
                    // .domain([d3.min(periods), d3.max(periods)])
                    // .domain([0.001,0.01])
                    .range([0, width - 0]),
                    xAxis = d3.svg.axis()
                    .scale(xscale)
                    .ticks(20, 'g .2f')
                    .orient("bottom");

                var yvalue = function(d) {
                        return d['Period Derivative'];
                    },
                    yscale = d3.scale.linear()
                    .domain([d3.min(periods_der), d3.max(periods_der)])
                    .range([height - 0, 0]),
                    yAxis = d3.svg.axis()
                    .scale(yscale)
                    .orient("left")


                var canvas = d3.select('body')
                    .append('svg')
                    .attr('width', width + margin.left + margin.right)
                    .attr('height', height + margin.top + margin.bottom)
                    .append("g")
                    .attr("transform", "translate(" + margin.left + "," + margin.top + ")")
                    .style("margin", "100")
                    .style("border", "1px solid black");

                canvas.append("g")
                    .attr("class", "axis axis--y")
                    // .attr("transform", "translate(40,0)")
                    .call(yAxis);

                canvas.append("g")
                    .attr("class", "axis axis--x")
                    .attr("transform", "translate(0," + (height) + ")")
                    .call(xAxis);

                canvas
                    .append("g")
                    .attr("class", "points")
                    // .attr("transform", "translate(40,0)")
                    .selectAll('circle')
                    .data(data)
                    .enter()
                    .append("circle")
                    .attr("cx", function(d, i) {
                        return xscale(d['Period']);
                    })
                    .attr("cy", function(d, i) {
                        return yscale(Math.log10(d['Period Derivative']));
                    })
                    .attr("r", 2.5);

            });
    </script>


</body>


</html>
